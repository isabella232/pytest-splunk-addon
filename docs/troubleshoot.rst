Troubleshooting
===================

**1. Test Case takes forever to run when using splunk-type=external**

    - Check all the Splunk instance information provided in arguments are present and correct.
    - ``--splunk-host``, ``--splunk-port``, ``--splunk-user`` and ``--splunk-password`` are required. If not provided, default values are considered which may not work for every setup.
    - Make sure the Splunk instance is up and running, also the Splunk server's management port should be accessible to the test machine.

**2. Getting No such file or directory while test collection.**

    - Check if the path provided in ``--splunk-app`` exists.

**3. No tests generated for any fields.**

    - Make sure the directory mentioned in ``--splunk-app`` has a format of Splunk app and has files like all the required configuration files in the default directory.

**4. Getting Couldn't find a version that satisfies the requirement when installing pytest-splunk-addon using pip.**

    - Use ``pip3 install pytest-splunk-addon`` and make sure you are using python 3.7

**5. While executing test cases on Kubernetes, all the test cases abort with the following setup failure:**

    - Kubernetes resources are not created

        - Make sure ``KUBECONFIG="PATH of Kubernetes Config File"`` is set in environment variables before starting test execution. (This will be used while spinning up kubernetes resources for --splunk-type=kubernetes)

    - Standalone not found.

        - Check whether splunk-operator is deployed at cluster-scoped level.
        - Try ``kubectl get pods -n splunk-operator`` - make sure all the pods are running.

    - Kubernetes pod splunk-s1-standalone-0 restarts

        - Check the logs of the pod using ``kubectl logs``
        - Make sure tests/src directory have addon spl with adequate name

    - Addon tests are erroring out

        - Check whether Splunk is up and addon is installed or not.
        - Make sure tests are getting executed from the root directory of addon repository.

**6. Only no-dash-no-empty test cases are passing**

    - If splunk-type is kubernetes, make sure you have add-on getting installed on the kubernetes deployed Splunk OR if external, install the add-on on the Splunk instance.
    - Make sure to configure the inputs to collect data or check if sufficient data required for testing is generated by the pytest-splunk-addon.

